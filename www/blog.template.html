<!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="blog.css">

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js">
    </script>
    <script src="https://apis.google.com/js/client:platform.js?onload=start" defer>
    </script>
  
    <script src="blog.js" defer></script>
  </head>
  <body>
    <h1>{name}</h1>

    <form method="POST" action="blog-update.cgi">
      <input type="hidden" name="id" value="{id}">
      <input type="hidden" name="auth" value="{auth}">

      <div class="field"><span class="fieldlabel">The name you will be identified by in the group RSS feed:</span> <input id="name" name="name" value="{name}"></div>

      <div class="field"><span class="fieldlabel">RSS or Blog URL:</span> <input id="rss" name="rss" value="{rss}">
	<div>
	  If you have a public RSS feed, or a Wordpress blog, put the
	  link you would subscribe to with an RSS reader above. If you
	  have a Blogger blog and it is not public, then put its main
	  domain here (usually something like <code>https://myblog.blogspot.com</code>)
	</div>
      </div>
      <div class="field">
	<div>Now, identify your blog to the server, as a general RSS
	feed, a Wordpress blog, or a Blogger blog, for further
	instructions. If you have a blog which is none of these, then
	  talk to Eric for support.
	</div>
	<span class="fieldlabel">Blog type:</span>
	<input type="hidden" id="blogtypehidden" name="blogtypehidden" value="{type}">
	<select id="type" name="type">
	  <option value="rss">RSS</option>
	  <option value="wordpress">Wordpress</option>
	  <option value="blogger">Blogger</option>
	</select>
	<div class="authentication">
	  <div class="wordpress">
	    <p>
	      For a Wordpress blog, you'll need to go to [your
	      Wordpress
	      domain]/wp-admin/options-general.php?page=webhooks,
	      click "Add webhook", and select these fields:
	      <ul>
		<li>ID</li>
		<li>guid</li>
		<li>post_author</li>
		<li>post_category</li>
		<li>post_content</li>
		<li>post_date</li>
		<li>post_name</li>
		<li>post_password</li>
		<li>post_status</li>
		<li>post_title</li>
		<li>post_url</li>
		<li>reader_url</li>
	      </ul>
	    </p>
	    <p>Then enter as the URL:
	      <input type="text" readonly class="copyurl"
		     id="wpwebhook" value="{wordpress_webhook}">
	      <input type="button" id="copywpwebhookbutton"
			  value="Click to copy">
	    </p>
	    <p>
	      Click "Add new Webhook" and you're done! This was
	      one-time setup.
	    </p>
	  </div>
	  <div class="google">
	    <div>
	      <p>
		For a Blogger blog that isn't public</li>
		you'll need to sign
		in to authenticate the RSS Group to read your posts.
	      </p>
	      <p>
		This should persist, but on occasion it may be
		necessary to return here and click the Sign in link
		again, if your blog stops showing up in the group.
	      </p>
	      <p><a href="google-oauth.cgi?id={id}&auth={auth}">Sign in</a></p>
	    </div>
	 </div>
	</div>
      </div>

	<div class="submit"><input type="submit" value="Save changes"></div>

	<div class="personalrss">
	  <p>
	    <strong>Your personal RSS link for this blog's group:</strong>
	    <a href="{personal_rss}">{personal_rss}</a>
	  </p>
	  <p>
	    Subscribe to this in your RSS reader, and it will include
	    posts from all members of the group, including yourself.
	  </p>
	  <p>
	    Keep this secret! Anyone you share it with can read the
	    entire group's posts, and can alter your settings.
	  </p>
	  <p>
	    It's safe enough to share with your RSS reader because
	    there is little choice.
	  </p>
	</div>

    </form>
    
<pre id="output">
</pre>
  </body>
</html>
